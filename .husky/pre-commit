STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|ts|jsx|tsx)$')

if [ -n "$STAGED_FILES" ]; then
  # Format staged files
  echo "$STAGED_FILES" | xargs bun run format:fix

  # Lint staged files
  echo "$STAGED_FILES" | xargs bun run lint:fix

  # Add formatted and linted files back to the staging area
  echo "$STAGED_FILES" | xargs git add
fi